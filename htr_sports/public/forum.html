<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width. initial-scale=1.0">
  <title>HTR Forum</title>
  <!-- insert icon 1 refernce here -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

</head>
<body>
  <ul>
    <li><a href="index.html">Hunter Sports</a></li>
    <li><a href="soccer.html">Soccer</a></li>
    <li><a href="basketball.html">Basketball</a></li>
    <li><a href="fantasy.html">Fantasy</a></li>
    <li><a href="forum.html">Forum</a></li>
    <li><a href="findgame.html">Find a Game</a></li>
  </ul>
   <div class = "container">
      <div class = "subforum">
<!--Post Begin-->
<div class = "subforum">
<hr class = "subforum_devider">
<div class = "subforum_title subforum_column">
    <h1><a>News</a></h1>
</div>
   <div class = "subforum_description subforum_column">
     <div class = "dropdown">
         <div class = "dropdown-content">
           <form>
             <label for = "title">Title:</label>
             <input type = "text" id = "title" name = "title"><br><br>
             <label for = "body">Body:</label>
             <input type = "text" id = "body" name = "body"><br><br>
             <input type = "button" onclick= "CreatePost_News()" id = "insert" value = "Submit Post"> <!-- onclick = "createAccount()" -->
           </form>
</div>
</div>
</div>
<br></br>
  <div id = "forum"></div>
<!--
<div class = "subforum_stats subforum_column center">
<span>0 Posts</span>
</div>
-->
<div class = "subforum_information subforum_column">
<!-- <b><a href = "">Last Post</a></b> by <a href = ""> User1
<br>
on <small>13 Sep 2022</small>
</div>
</div>
-->

<!-- Post End-->
<!--Post Begin-->
<hr class = "subforum_devider">
<div class = "subforum_title subforum_column">
    <h1><a> UEFA Champions League Talk</a></h1>
</div>
   <div class = "subforum_description subforum_column">
     <div class = "dropdown">
         <div class = "dropdown-content">
           <form>
             <label for = "title">Title:</label>
             <input type = "text" id = "title" name = "title"><br><br>
             <label for = "body">Body:</label>
             <input type = "text" id = "body" name = "body"><br><br>
             <input type = "button" id = "insert" value = "Submit Post"> <!-- onclick = "createAccount()" -->
           </form>
</div>
</div>
</div>
<!-- Post End-->


</body>
<!-- CSS -->
<!-- CSS END -->

<!-- ############# INDEX CSS ########### -->
<style>
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-color: #333;
}

li {
  float: left;
}

li a {
  display: block;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

li a:hover {
  background-color: #111;
}
</style>
<!-- ############# INDEX CSS END ########### -->

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-analytics.js";
    import {getDatabase, push, set, get, update, remove, ref, child} from "https://www.gstatic.com/firebasejs/9.9.4/firebase-database.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBoF3DW_pIDocCRPlrqFpUfxdXtCT7lpFQ",
      authDomain: "htr-sports.firebaseapp.com",
      databaseURL: "https://htr-sports-default-rtdb.firebaseio.com",
      projectId: "htr-sports",
      storageBucket: "htr-sports.appspot.com",
      messagingSenderId: "119767757957",
      appId: "1:119767757957:web:d9f4cfeed391dc8bbde5ec",
      measurementId: "G-WEB0Z72L02"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    const db = getDatabase();

    var user = document.getElementById("username");
    var title = document.getElementById("title");
    var body = document.getElementById("body");
    var insertBTN = document.getElementById("insert");

    function CreatePost_News(){
      //alert("Clicked");
      push(ref(db, '/Posts_news'),{
         Title: title.value,
         Body: body.value
     })
     .then(()=>{
         alert("Posted successfully");
         location.reload();
     })
     .catch((error)=>{
         alert(error);
     });
    }
    insertBTN.addEventListener('click',CreatePost_News);
    async function readData_News(){
        const dbRef = ref(db);
        get(child(dbRef, 'Posts_news/')).then((snapshot) => {
        if (snapshot.exists()) {
            //console.log(snapshot.val());
            for (var key in snapshot.val()){
              console.log(snapshot.val()[key]);
              const title = document.createElement("dt");
              title.innerHTML = "Post: "+snapshot.val()[key].Title;
              const post = document.createElement("dd");
              post.innerHTML = snapshot.val()[key].Body;
              const linebreaker = document.createElement("dt")
              linebreaker.innerHTML = "---------------------------------------------"
              forum.appendChild(title);
              forum.appendChild(post);
              forum.appendChild(linebreaker);
            }
        } else {
        console.log("No data available");
    }
        }).catch((error) => {
        console.error(error);
        });
    }
    readData_News();


    //search bar
  </script>

</html>
